<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Merry Christmas</title>

<style>
html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:hidden;
    font-family:"Comic Sans MS","Arial Rounded MT Bold",cursive;
}

.scene{
    position:relative;
    width:100vw;
    height:100vh;
    background:radial-gradient(circle at top,#001b33,#000);
    overflow:hidden;
}

/* é›ªèŠ± */
#snowCanvas{
    position:absolute;
    inset:0;
    z-index:1;
}

/* åœ£è¯æ ‘ */
.mainTree{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:min(60vw,60vh);
    z-index:3;
    cursor:pointer;
    animation:sway 4s ease-in-out infinite;
}

@keyframes sway{
    0%,100%{transform:translate(-50%,-50%) rotate(-1deg);}
    50%{transform:translate(-50%,-50%) rotate(1deg);}
}

/* åº•éƒ¨ç¥ç¦ */
.bottomText{
    position:absolute;
    bottom:10%;
    width:100%;
    text-align:center;
    color:#fff;
    z-index:4;
    text-shadow:0 0 12px rgba(255,255,255,.8);
}
.bottomText .title{font-size:7vw;}
.bottomText .name{font-size:6vw;margin-top:1vh;}

/* From */
.from{
    position:absolute;
    bottom:2%;
    right:4%;
    font-size:4vw;
    color:rgba(255,255,255,.85);
    z-index:4;
}

/* å°è´´å£« */
.tip{
    position:absolute;
    max-width:44vw;
    padding:10px 16px;
    background:rgba(255,255,255,.18);
    border-radius:18px;
    backdrop-filter:blur(6px);
    color:#fff;
    font-size:4vw;
    opacity:0;
    transform:translate(-50%,-50%) scale(.8) rotate(-3deg);
    transition:opacity 1s ease,transform 1s ease;
    z-index:4;
    pointer-events:none;
}
.tip.show{
    opacity:1;
    transform:translate(-50%,-55%) scale(1) rotate(2deg);
}

/* å‘Šç™½å¼¹çª— */
.love{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.6);
    z-index:10;
    opacity:0;
    pointer-events:none;
    transition:opacity .8s ease;
}
.love.show{
    opacity:1;
    pointer-events:auto;
}
.loveBox{
    padding:30px 36px;
    background:rgba(255,255,255,0.2);
    border-radius:24px;
    color:#fff;
    font-size:6vw;
    text-align:center;
    backdrop-filter:blur(10px);
    box-shadow: 0 0 20px rgba(255,105,180,0.5);
    animation:heartbeat 1.6s infinite;
}
@keyframes heartbeat{
    0%,100%{transform:scale(1);}
    50%{transform:scale(1.06);}
}

/* ğŸµ å¼€å¯éŸ³ä¹æç¤º */
.musicHint{
    position:fixed;
    bottom:18%;
    left:50%;
    transform:translateX(-50%);
    padding:10px 18px;
    background:rgba(255,255,255,.2);
    border-radius:20px;
    color:#fff;
    font-size:4vw;
    backdrop-filter:blur(6px);
    z-index:6;
    animation:pulse 1.6s infinite;
    cursor:pointer;
}
@keyframes pulse{
    0%,100%{transform:translateX(-50%) scale(1);}
    50%{transform:translateX(-50%) scale(1.08);}
}

/* PC é€‚é… */
@media (min-width:768px){
    .tip{font-size:22px;max-width:320px;}
    .loveBox{font-size:36px;}
    .from{font-size:18px;}
    .musicHint{font-size:18px;}
}
</style>
</head>

<body onclick="startMusic()"> <div class="scene">
    <canvas id="snowCanvas"></canvas>

    <div class="mainTree" id="mainTree">ğŸ„</div>

    <div class="bottomText">
        <div class="title">Merry Christmas</div>
        <div class="name">æ¶µå®</div>
    </div>

    <div class="from">From TQF</div>

    <div class="musicHint" id="musicHint">ç‚¹å‡»å¼€å¯éŸ³ä¹ ğŸµ</div>
</div>

<div class="love" id="love">
    <div class="loveBox">æ¢è¯—æ¶µ<br>æˆ‘å–œæ¬¢ä½  ğŸ’–</div>
</div>

<audio id="bgm" loop preload="auto">
    <source src="https://cdn.pixabay.com/audio/2022/10/26/audio_8e6b5a4c55.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== é›ªèŠ±é€»è¾‘ä¿æŒä¸å˜ ===== */
const canvas=document.getElementById("snowCanvas");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
resize();addEventListener("resize",resize);

class Snow{
    constructor(){
        this.x=Math.random()*canvas.width;
        this.y=Math.random()*canvas.height;
        this.r=Math.random()*4+1.5;
        this.s=Math.random()*1.2+.3;
        this.a=Math.random()*.6+.3;
    }
    u(){this.y+=this.s;if(this.y>canvas.height){this.y=-10;this.x=Math.random()*canvas.width;}}
    d(){
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
        ctx.fillStyle=`rgba(255,255,255,${this.a})`;
        ctx.fill();
    }
}
const snows=Array.from({length:160},()=>new Snow());
(function anim(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    snows.forEach(s=>{s.u();s.d();});
    requestAnimationFrame(anim);
})();

/* ===== å°è´´å£«é€»è¾‘ä¿æŒä¸å˜ ===== */
const tips=[
"å¤©å†·è®°å¾—å¤šç©¿ä¸€ç‚¹ â˜ƒï¸",
"ä¸å¼€å¿ƒçš„æ—¶å€™æƒ³æƒ³æˆ‘ ğŸ’—",
"è®°å¾—æŒ‰æ—¶åƒé¥­ ğŸ°",
"å¸Œæœ›è¿™ä¸ªå†¬å¤©æˆ‘èƒ½é™ªä½  âœ¨",
"åœ£è¯å¤œæ—©ç‚¹ç¡ ğŸ˜˜",
"æˆ‘ç»™ä½ æš–æ‰‹æ‰‹ ğŸ”¥",
"çƒ­å¥¶èŒ¶å°å¿ƒçƒ« â˜•ï¸",
"ä½ æ°¸è¿œå€¼å¾—è¢«çˆ± ğŸ’"
];
const tree=document.getElementById("mainTree");
let i=0;

function aroundTree(){
    const r=tree.getBoundingClientRect();
    const cx=r.left+r.width/2;
    const cy=r.top+r.height/2;
    const radius=Math.min(innerWidth,innerHeight)*.28;
    const ang=Math.random()*Math.PI*2;
    return{ x:cx+Math.cos(ang)*radius, y:cy+Math.sin(ang)*radius };
}

setInterval(()=>{
    const tip=document.createElement("div");
    tip.className="tip";
    tip.innerText=tips[i%tips.length];
    document.querySelector(".scene").appendChild(tip);
    const p=aroundTree();
    tip.style.left=p.x+"px";
    tip.style.top=p.y+"px";
    requestAnimationFrame(()=>tip.classList.add("show"));
    setTimeout(()=>{
        tip.classList.remove("show");
        setTimeout(()=>tip.remove(),1000);
    },2600);
    i++;
},3000);

/* ===== å¢å¼ºç‰ˆéŸ³ä¹æ’­æ”¾é€»è¾‘ ===== */
const bgm=document.getElementById("bgm");
const hint=document.getElementById("musicHint");
let isPlaying = false;

function startMusic(){
    if(isPlaying) return;
    bgm.play().then(()=>{
        isPlaying = true;
        hint.style.display="none";
    }).catch((err)=>{
        console.log("ç­‰å¾…ç”¨æˆ·äº¤äº’ä»¥æ’­æ”¾éŸ³ä¹");
    });
}

// ç›‘å¬æ›´å¤šäº¤äº’
hint.addEventListener("click", (e) => {
    e.stopPropagation();
    startMusic();
});

/* ===== å‘Šç™½é€»è¾‘ ===== */
const love=document.getElementById("love");
tree.onclick=(e)=>{
    e.stopPropagation();
    startMusic();
    love.classList.add("show");
    setTimeout(()=>love.classList.remove("show"),3500);
};
</script>
</body>
</html>
